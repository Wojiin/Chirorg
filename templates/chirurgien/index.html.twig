{% extends 'base.html.twig' %}
{% block title %}Liste des chirurgiens{% endblock %}
{# Bloc principal du contenu de la page #} {%
block body %} {# Titre de la page listant tous les chirurgiens #}
<h1>Chirurgiens</h1>

{# Lien vers la page de création d'un nouveau chirurgien #}
<a href="{{ path('chirurgien_new') }}"class="link-glow">Créer un chirurgien</a>

<ul>
    {# Parcourt la liste des chirurgiens transmise par le contrôleur #} {% for c
    in chirurgiens %}
    <li>
        {# Nom complet du chirurgien avec lien vers la page détail #}
        <strong>
            <a href="{{ path('chirurgien_show', { id: c.id }) }}"class="link-glow">
                {{ c.prenom }} {{ c.nom }}
            </a>
        </strong>

        {# Affichage de la spécialité si elle existe #} — {% if c.specialiser %}
        <a href="{{ path('specialite_show', { id: c.specialiser.id }) }}"class="link-glow">
            {{ c.specialiser.intitule }}
        </a>
        {% else %} Aucune spécialité {% endif %}

        <br />

        {# Lien vers la page de modification du chirurgien #}
        <a href="{{ path('chirurgien_edit', { id: c.id }) }}">Modifier</a>
        | {# Formulaire de suppression sécurisé par token CSRF #}
        <form
            method="post"
            action="{{ path('chirurgien_delete', { id: c.id }) }}"
            style="display: inline"
        >
            {# Token CSRF pour sécuriser la suppression #}
            <input
                type="hidden"
                name="_token"
                value="{{ csrf_token('delete' ~ c.id) }}"
            />

            <button type="submit">Supprimer</button>
        </form>
    </li>

    {# Bloc exécuté si la liste des chirurgiens est vide #} {% else %}
    <li>Aucun chirurgien.</li>
    {% endfor %}
</ul>

{% endblock %}
